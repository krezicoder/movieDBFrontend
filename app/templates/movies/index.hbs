<div class="w-full mx-auto">
    <table class="table-auto w-full text-left whitespace-no-wrap">
        <thead>
            <tr>
                <th
                    class="px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-200 rounded-tl rounded-bl">
                    ID</th>
                <th
                    class="px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-200 rounded-tl rounded-bl">
                    Movie Title</th>
                <th class="px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-200">
                    Description</th>
                <th class="px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-200">
                    Category</th>
                <th class="px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-200">Ratings
                </th>
                {{#if this.session.isAuthenticated}}
                <th class="px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-200">Actions
                </th>
                {{/if}}

            </tr>
        </thead>
        <tbody>
            {{#each @model as |movie|}}
            <tr class="hover:bg-gray-100">
                <td class="px-4 py-3">{{movie.id}}</td>
                <td class="px-4 py-3">{{movie.title}} {{movie.user.id}}</td>
                <td class="px-4 py-3">{{movie.description}}</td>
                <td class="px-4 py-3">{{movie.category.title}}</td>
                {{#if this.session.isAuthenticated}}
                <td class="px-4 py-3 w-20">
                    {{#if movie.hasCrudPermission}}
                    <StarRating @rating={{movie.avgRating}} @numStars={{5}} @anyPercent={{true}} @readOnly={{true}}
                        @width={{25}} @height={{25}} @fillColor={{"#48bb78"}} />
                    <span class="-m-1">({{movie.avgRating}})</span>
                    {{/if}}
                    {{#unless movie.hasCrudPermission}}

                    <StarRating @rating={{movie.avgRating}} @numStars={{5}} @readOnly={{true}}
                        @fillColor={{"#bb4848"}} />
                    <span class="-m-1">({{movie.avgRating}})</span>
                    {{/unless}}

                </td>

                <td class="px-4 py-3 text-lg text-gray-900">
                    {{#if movie.hasCrudPermission}}

                    <button type="button">
                        <LinkTo @route="movies.edit" @model={{movie}}>
                            <FaIcon @icon="edit" class="text-green-500" />
                        </LinkTo>
                    </button>
                    <button type="button" {{on 'click' (fn this.deleteMovie movie)}}>
                        <FaIcon @icon="trash" class="text-red-500" /> </button>
                    {{/if}}
                    {{#unless movie.hasCrudPermission}}
                    <span class="text-red-500 text-sm">No Actions</span>
                    {{/unless}}
                </td>
                {{/if}}

                {{#unless this.session.isAuthenticated}}
                <td class="px-4 py-3">
                    <StarRating @rating={{movie.avgRating}} @numStars={{5}} @readOnly={{true}}
                        @fillColor={{"#bb4848"}} />
                    ({{movie.avgRating}}) </td>

                {{#if this.session.isAuthenticated}}
                <td class="px-4 py-3 text-lg text-gray-900">

                    <span class="text-red-500 text-sm">No Actions</span>

                </td>
                {{/if}}

                {{/unless}}


            </tr>

            {{/each}}

        </tbody>
    </table>
    <Pagination @pagination={{@model.meta.pagination}} @route_name={{"movies.index"}}></Pagination>
</div>
{{outlet}}